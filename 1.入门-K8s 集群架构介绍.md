# 1.入门-K8s 集群架构介绍
Kubernetes（通常简称为K8s）是一个用于自动部署、扩展和管理容器化应用程序的开源容器编排平台。它提供了一种便捷的方式来管理容器，使得在一个集群中运行、调度和扩展应用程序变得更加简单。
## 为什么使用k8s而不是直接使用Docker？
尽管Docker提供了优秀的容器化解决方案，但它主要专注于构建、打包和运行容器。Kubernetes在这个基础上提供了更高级的编排和管理功能，特别适用于复杂的微服务架构和大规模的容器化应用程序。

1. **自动化和编排：** Kubernetes提供了自动化和编排容器的能力，使得在生产环境中运行大规模、多组件的应用程序变得容易。

2. **高可用性：** Kubernetes的设计目标之一是确保应用程序的高可用性，即使在节点故障或其他问题时，也能保持服务的可用性。

3. **水平扩展：** Kubernetes支持水平扩展，能够根据负载自动调整应用程序的规模，以应对流量的变化。

4. **服务发现和负载均衡：** Kubernetes提供了内置的服务发现机制和负载均衡，使得在应用程序组件之间进行通信更加容易。

5. **滚动更新和回滚：** Kubernetes支持滚动更新，使得应用程序的升级变得更加平滑，同时也支持回滚到之前的版本。

6. **资源管理：** Kubernetes允许对资源进行灵活的管理和调度，确保Pods获得适当的资源分配。

## K8s基本概念
以下是Kubernetes的一些基本概念和入门介绍：

### 1. **容器化技术基础**

Kubernetes主要用于管理和编排容器化应用程序。容器是一种轻量级、可移植的软件打包方式，其中包含应用程序及其所有依赖关系。Docker是一个流行的容器化工具，但K8s也支持其他容器运行时。

### 2. **Kubernetes的核心概念**
![](media/17088171492283/17106646500502.jpg)

#### 2.1 **Pods（Pod）**
Pod是Kubernetes中最小的可部署单元，它包含一个或多个相关的容器。这些容器共享网络命名空间和存储卷，它们通常协同工作来构成一个应用程序。

#### 2.2 **Service（服务）**
Service定义了一组Pod的逻辑集合，并提供了一个访问这些Pod的稳定入口点。Service可以通过集群内部或外部的网络访问这些Pod。

#### 2.3 **Deployment（部署）**
Deployment用于定义应用程序的期望状态，并确保实际运行的Pod副本数量与期望状态一致。Deployment还支持滚动更新和回滚操作，以便更新应用程序。

#### 2.4 **ConfigMap和Secret**
ConfigMap用于将配置数据从应用程序中分离出来，而Secret则用于安全地存储敏感信息，如密码、API密钥等。
#### 2.4 **Ingress**
Kubernetes Ingress（K8s Ingress）是一种用于管理和公开Kubernetes集群中服务的API对象。它允许外部流量进入集群，并提供路由规则来决定如何将该流量路由到不同的服务.
### 3. **Kubernetes的工作原理**

Kubernetes集群由一组物理或虚拟机器组成，这些机器被称为节点。集群有一个主节点（Master）和多个工作节点（Node）。

#### 3.1 **主节点（Master）**
主节点负责管理集群的整体状态和控制工作节点的操作。它包括以下组件：
- **API Server：** 提供了K8s API的入口，用于与Kubernetes进行交互。
- **Controller Manager：** 负责监控系统状态，确保实际状态符合期望状态。
- **Scheduler：** 负责将Pod调度到工作节点上运行。

#### 3.2 **工作节点（Node）**
工作节点是集群中的计算资源，用于运行容器。每个工作节点包括以下组件：
- **Kubelet：** 负责与主节点通信，确保在节点上运行所需的Pod。
- **Container Runtime：** 用于启动和管理容器的软件，如Docker。
- **Kube Proxy：** 负责在节点上实现Service的网络代理。

### 4. **Kubernetes的使用流程**

1. **定义应用程序：** 使用K8s的YAML文件定义应用程序的组件，包括Pods、Services、Deployments等。
   
2. **部署应用程序：** 使用kubectl工具或Kubernetes API将定义的应用程序组件部署到集群中。

3. **Kubernetes控制器处理：** 控制器（如Deployment）会接收定义并确保集群状态与定义状态一致。

4. **应用程序运行：** K8s会在工作节点上创建和调度Pods，确保应用程序正常运行。

5. **监控和维护：** 使用K8s的监控工具来监测集群状态，进行日志管理和故障排除。

Kubernetes为应用程序提供了弹性、可伸缩性和高可用性的运行环境，使得应用程序在多个环境中更容易部署和管理。学习和掌握Kubernetes需要逐步深入，通过实践和使用各种资源来加深理解。